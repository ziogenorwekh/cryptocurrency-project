plugins {
    id 'java-library'
    id 'com.github.davidmc24.gradle.plugin.avro' version "${avroPluginVersion}"
    id 'idea'
}

group = 'shop.shportfolio'
version = '1.0-SNAPSHOT'

dependencies {
    api "org.apache.avro:avro:${avroVersion}"
    annotationProcessor "org.apache.avro:avro:${avroVersion}"
    compileOnly "org.apache.avro:avro:${avroVersion}"
    testImplementation platform("org.junit:junit-bom:${junitVersion}")
    testImplementation "org.junit.jupiter:junit-jupiter"
}

avro {
    outputCharacterEncoding = "UTF-8"
}

sourceSets {
    main {
        java {
            srcDirs += 'build/generated-src/avro/main/java'
        }
    }
}

idea {
    module {
        sourceDirs += file('build/generated-src/avro/main/java')
        generatedSourceDirs += file('build/generated-src/avro/main/java')
    }
}

test {
    useJUnitPlatform()
}
